# ะัะบะพะฒะพะดััะฒะพ ะฟะพ ัะฐะฑะพัะต ั ัะตะบะฐะผะธ ะฎKassa

## ๐ ะะฑะทะพั

ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐะตั ะธ ะพัะฟัะฐะฒะปัะตั ัะตะบะธ ะฟะพะปัะทะพะฒะฐัะตะปัะผ ะฟัะธ ัะพะทะดะฐะฝะธะธ ะฟะปะฐัะตะถะฐ ัะตัะตะท ะฎKassa. ะงะตะบ ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ัะพะทะดะฐะฝะธะธ ะฟะปะฐัะตะถะฐ ั ัะบะฐะทะฐะฝะฝัะผ email.

## ๐ง ะะฐัััะพะนะบะฐ

### ะขัะตะฑะพะฒะฐะฝะธั
- ะะฐัััะพะตะฝะฝัะน ะฐะบะบะฐัะฝั ะฎKassa
- `YOOKASSA_SHOP_ID` ะธ `YOOKASSA_SECRET_KEY` ะฒ `.env`
- ะะบะปััะตะฝะฝะฐั ััะฝะบัะธั ัะตะบะพะฒ ะฒ ะปะธัะฝะพะผ ะบะฐะฑะธะฝะตัะต ะฎKassa

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
```env
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
```

## ๐ง ะัะพัะตัั ัะฐะฑะพัั ั ัะตะบะฐะผะธ

### 1. ะะฐะฟัะพั email
ะัะธ ะฒัะฑะพัะต ะบะพะฝััะปััะฐัะธะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฟัะตะดะปะฐะณะฐะตััั:
- ๐ง ะะฒะตััะธ email ะดะปั ะฟะพะปััะตะฝะธั ัะตะบะฐ
- ๐ซ ะัะบะฐะทะฐัััั ะพั ัะตะบะฐ

### 2. ะะฐะปะธะดะฐัะธั email
- ะัะพะฒะตััะตััั ะบะพััะตะบัะฝะพััั ัะพัะผะฐัะฐ email
- ะัะธ ะพัะธะฑะบะต ะฟัะตะดะปะฐะณะฐะตััั ะฟะพะฒัะพัะธัั ะฒะฒะพะด

### 3. ะกะพะทะดะฐะฝะธะต ะฟะปะฐัะตะถะฐ
- ะะปะฐัะตะถ ัะพะทะดะฐะตััั ั ัะพััะฐะฝะตะฝะธะตะผ email
- Email ัะพััะฐะฝัะตััั ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั

### 4. ะกะพะทะดะฐะฝะธะต ัะตะบะฐ
ะัะธ ัะพะทะดะฐะฝะธะธ ะฟะปะฐัะตะถะฐ:
- ะะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐะตััั ัะตะบ ัะตัะตะท ะฎKassa API
- ะงะตะบ ะพัะฟัะฐะฒะปัะตััั ะฝะฐ ัะบะฐะทะฐะฝะฝัะน email
- ะะพัะปะต ะพะฟะปะฐัั ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพะปััะฐะตั ัะฒะตะดะพะผะปะตะฝะธะต ะพ ัะตะบะต

## ๐๏ธ ะกัััะบัััะฐ ะฑะฐะทั ะดะฐะฝะฝัั

### ะขะฐะฑะปะธัะฐ consultations
```sql
ALTER TABLE consultations ADD COLUMN email VARCHAR(255);
```

### ะะพะปั ัะตะบะฐ
- `payment_id` - ID ะฟะปะฐัะตะถะฐ
- `email` - Email ะฟะพะปัะทะพะฒะฐัะตะปั
- `consultation_type` - ะขะธะฟ ะบะพะฝััะปััะฐัะธะธ
- `amount` - ะกัะผะผะฐ ะพะฟะปะฐัั

## ๐ ะัะปะฐะดะบะฐ

### ะัะพะฒะตัะบะฐ ะฝะฐัััะพะตะบ
```bash
python test_receipt.py
```

### ะะพะณะธ
- ะกะพะทะดะฐะฝะธะต ัะตะบะฐ: `logger.info("ะงะตะบ ัะพะทะดะฐะฝ ะดะปั ะฟะปะฐัะตะถะฐ {payment_id}")`
- ะัะธะฑะบะธ: `logger.error("ะัะธะฑะบะฐ ัะพะทะดะฐะฝะธั ัะตะบะฐ: {error}")`

### ะะพะทะผะพะถะฝัะต ะพัะธะฑะบะธ
1. **ะฎKassa ะฝะต ะฝะฐัััะพะตะฝะฐ** - ะฟัะพะฒะตัััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
2. **ะะปะฐัะตะถ ะฝะต ะฝะฐะนะดะตะฝ** - ะฟัะพะฒะตัััะต ะบะพััะตะบัะฝะพััั payment_id
3. **ะะตะฒะตัะฝัะน email** - ะฟัะพะฒะตัััะต ัะพัะผะฐั email
4. **ะัะธะฑะบะฐ API** - ะฟัะพะฒะตัััะต ะฝะฐัััะพะนะบะธ ะฒ ะปะธัะฝะพะผ ะบะฐะฑะธะฝะตัะต ะฎKassa

## ๐ ะัะธะผะตั ัะตะบะฐ

```
๐งพ ะงะะ ะะ ะะะะะขะ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ะะฐัะฐ: 20.08.2025 19:30
๐ ะะพะผะตั ัะตะบะฐ: 12345678-1234-1234-1234-123456789012
๐ค ะะพะบัะฟะฐัะตะปั: ะะฒะฐะฝ ะะฒะฐะฝะพะฒ
๐ Telegram ID: 123456789
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ะฃัะปัะณะฐ: ะฃััะฝะฐั ะบะพะฝััะปััะฐัะธั
๐ฐ ะกัะผะผะฐ: 10โฝ
๐ณ ะกะฟะพัะพะฑ ะพะฟะปะฐัั: ะฎKassa
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะกัะฐััั: ะะฟะปะฐัะตะฝะพ
๐ ะะพะดะพะฒะพะต ัะปะพะฒะพ: ะฎะะะกะข2024
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ะะพะดะดะตัะถะบะฐ: @narhipovd
๐ ะกะฐะนั: https://xn--d1achcyjfchw0b0fya.net/
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะขะตััะธัะพะฒะฐะฝะธะต

### ะะฐะฟััะบ ัะตััะฐ
```bash
python test_receipt.py
```

### ะัะพะฒะตัะบะฐ ะฒ ะฑะพัะต
1. ะัะฑะตัะธัะต ะบะพะฝััะปััะฐัะธั
2. ะะฒะตะดะธัะต ะบะพััะตะบัะฝัะน email
3. ะะฟะปะฐัะธัะต ะบะพะฝััะปััะฐัะธั
4. ะัะพะฒะตัััะต ะฟะพะปััะตะฝะธะต ัะตะบะฐ ะฝะฐ email

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะธ ะฟัะพะฑะปะตะผะฐั ั ัะตะบะฐะผะธ:
- ะัะพะฒะตัััะต ะปะพะณะธ ะฑะพัะฐ
- ะฃะฑะตะดะธัะตัั ะฒ ะบะพััะตะบัะฝะพััะธ ะฝะฐัััะพะตะบ ะฎKassa
- ะะฑัะฐัะธัะตัั ะฒ ะฟะพะดะดะตัะถะบั: @narhipovd
