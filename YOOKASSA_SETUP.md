# Настройка ЮKassa для бота

## 1. Регистрация в ЮKassa

1. Перейдите на сайт [ЮKassa](https://yookassa.ru/)
2. Зарегистрируйтесь как юридическое лицо или ИП
3. Пройдите верификацию и получите доступ к личному кабинету

## 2. Получение данных для интеграции

1. В личном кабинете ЮKassa перейдите в раздел "Настройки" → "API"
2. Скопируйте:
   - **Shop ID** (идентификатор магазина)
   - **Secret Key** (секретный ключ)

## 3. Настройка переменных окружения

Добавьте в файл `.env` следующие переменные:

```env
# ЮKassa настройки
YOOKASSA_SHOP_ID=your_shop_id_here
YOOKASSA_SECRET_KEY=your_secret_key_here
```

## 4. Установка зависимостей

Установите SDK ЮKassa:

```bash
pip install yookassa>=3.0.0
```

## 5. Настройка webhook (опционально)

Для автоматического получения уведомлений о платежах:

1. В личном кабинете ЮKassa перейдите в "Настройки" → "Уведомления"
2. Добавьте URL вашего webhook: `https://your-domain.com/webhook/yookassa`
3. Выберите события для уведомлений:
   - `payment.succeeded` - успешная оплата
   - `payment.canceled` - отмененная оплата

## 6. Тестирование

1. Запустите бота
2. Попробуйте создать тестовый платеж
3. Проверьте, что платеж создается и статус обновляется

## 7. Важные моменты

- **Тестовый режим**: ЮKassa предоставляет тестовые данные для разработки
- **Безопасность**: Никогда не публикуйте секретный ключ в открытом доступе
- **Логирование**: Все операции с платежами логируются для отладки
- **Обработка ошибок**: Код включает обработку различных ошибок платежной системы
- **Чеки**: Для платежей в России обязательно передается информация о чеке (receipt)
- **НДС**: В коде используется код НДС "1" (без НДС), измените при необходимости

## 8. Структура платежей

Бот создает платежи со следующими параметрами:
- **Устная консультация**: 10₽
- **Полная консультация**: 15₽
- **Валюта**: RUB (рубли)
- **Автоподтверждение**: включено

## 9. Проверка статуса платежей

Пользователи могут проверять статус своих платежей через кнопку "Проверить оплату" в боте.

## 10. Поддержка

При возникновении проблем:
1. Проверьте логи бота
2. Убедитесь, что переменные окружения настроены правильно
3. Проверьте статус аккаунта в ЮKassa
4. Обратитесь в поддержку ЮKassa при необходимости
